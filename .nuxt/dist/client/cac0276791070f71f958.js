(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{478:function(t,a,e){"use strict";e.r(a);e(76),e(55);var s={name:"Step3",head:{link:[{rel:"stylesheet",href:"/css/insuranceStep3.css"},{rel:"stylesheet",href:"/css/insuranceComon.css"},{rel:"stylesheet",href:"/theme/default/laydate.css"}]},layout:"subLayout",mounted:function(){seajs.use(["/js/insurance.js"],function(){seajs.use(["/js/laydate.js"],function(){seajs.use(["/js/dedeajax2.js"],function(){seajs.use(["/js/gaodemap2.js"],function(){seajs.use(["/js/jquery.pagination.min.js"],function(){$(function(){var t=JSON.parse(window.sessionStorage.getItem("step1")),a=JSON.parse(window.sessionStorage.getItem("step2")),e={insuranceCompany:"平安保险",insuranceName:"平安保险国内"+t.insuranceType,startProvince:"",startCity:"",endProvince:"",endCity:"",atransferAddressList:[],startTime:"",carNum:"",orderNum:"",paymentState:0,insuranceProductsId:"1"},s=new Date,n=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds();function i(){if($("#data1").val()&&$("#data2").val()){var t={startProvince:$("#data1").val().split(",")[0],endProvince:$("#data2").val().split(",")[0],goodsValue:a.goodsValue,insuranceProductsId:e.insuranceProductsId};api.postInfo("/aflc-portal/portalt/aflcinsurancepolicy/v1/computationalfee",t).done(function(t){$("#insuranceFee").html("<font>"+t.data.insuranceFee+"</font><em>元</em>"),$("#insuranceDeductibles").html("<span>"+t.data.insuranceDeductibles+"</span>"),$("#insuranceRate").html("<font>"+t.data.insuranceRate+"</font>")})}}laydate.render({elem:"#data3",type:"datetime",min:n,done:function(t,a,e){t?($("#data3").removeClass("error"),$("#data3").next().remove(),$("#data3").after("<img style='margin-left: 10px' src='/img/u198861.png' alt=''>")):($("#data3").next().remove(),$("#data3").after("<span style='margin-left: 10px'><img src='/img/u198863.png' alt=''><span style='position: relative;top: -3px;left: 5px;'>请选择日期</span></span>"),$("#data3").addClass("error"))}}),i(),$("#afwl-map-button-confirm").on("click",function(){i(),$("#data1").val()?($("#data1").removeClass("error"),$("#data1").next().remove(),$("#data1").after("<img style='margin-left: 10px' src='/img/u198861.png' alt=''>")):($("#data1").next().remove(),$("#data1").after("<span style='margin-left: 10px'><img src='/img/u198863.png' alt=''><span style='position: relative;top: -3px;left: 5px;'>请选择日期</span></span>"),$("#data1").addClass("error")),$("#data2").val()?($("#data2").removeClass("error"),$("#data2").next().remove(),$("#data2").after("<img style='margin-left: 10px' src='/img/u198861.png' alt=''>")):($("#data2").next().remove(),$("#data2").after("<span style='margin-left: 10px'><img src='/img/u198863.png' alt=''><span style='position: relative;top: -3px;left: 5px;'>请选择日期</span></span>"),$("#data2").addClass("error"))}),$(".next_button").click(function(){!function(){var s="/aflc-uc/usercenter/aflcinsurancepolicy/v1/?access_token="+$.cookie("access_token");if(console.log(insuranceValidate.check()),insuranceValidate.check()){console.log(123213),e.startProvince=$("#data1").val().split(",")[0],e.startCity=$("#data1").val().split(",")[1],e.endProvince=$("#data2").val().split(",")[0],e.endCity=$("#data2").val().split(",")[1];var n=[],i=1;if($(".center3 input").each(function(){$(this).val()&&n.push({transferCity:$(this).val().split(",")[1],transferOrder:i++,transferProvince:$(this).val().split(",")[0]})}),e.atransferAddressList=n,e.startTime=$("#data3").val(),e.carNum=$("#data4").val(),e.orderNum=$("#data5").val(),$.cookie("access_token")){var r=$.extend(e,t,a);api.postInfo(s,r).done(function(t){window.location.href="/Insurance/pay?id="+t.data}).fail(function(t){})}else $(".login_box").show(),$(".login_box_mask").show()}}()}),$("#add1").click(function(){$(".center3").eq(0).after('<tr class="center3"><td><i></i>中转地：</td><td><input wtmap="provinceCity" class="input02 centerp" placeholder="请输入货物中转地" /><img src="images/sub.png" onclick="sub1(this)"  /></td></tr>'),$().reLoadWtmap()});var r,l=this;$(".login-btn, .login-yzm").on("click",function(){clearInterval(r),r=setInterval(function(){$.cookie("access_token")&&(clearInterval(r),l.next())},300)}),$(".login_close img").on("click",function(){clearInterval(r)})})})})})})})}},n=e(0),i=Object(n.a)(s,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"step3"},[e("div",{staticClass:"top_bg"},[e("div",{staticClass:"top center"},[e("ul",[t._m(0),t._v(" "),t._m(1),t._v(" "),e("li",{staticClass:"top_3"},[e("img",{attrs:{src:"/images/insurance/phone-bx.png"}}),t._v(" "),e("span",[t._v("免费热线")]),e("font",[t._v("400-999-2828")])],1)])])]),t._v(" "),t._m(2)])},[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"top_1"},[a("a",{attrs:{href:"/",target:"_blank"}},[a("img",{attrs:{src:"/images/index_files/logor.png"}})])])},function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"top_2"},[a("span",[this._v("保险商城")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main center"},[e("div",{staticClass:"m_border center"},[e("form",{staticClass:"center validateForm"},[e("table",[e("tr",[e("div",{staticClass:"main_bt"},[e("span",[t._v("运输信息")]),e("i")])]),t._v(" "),e("tr",{staticClass:"start3"},[e("td",[e("i",[t._v("*")]),t._v("起运地：")]),e("td",[e("input",{staticClass:"input02 startp",attrs:{id:"data1","data-toggle":"city-picker","data-level":"district",wtmap:"provinceCity",validate:'{"msg":"请选择货物起运地"}',placeholder:"请选择货物起运地"}})])]),t._v(" "),e("tr",{staticClass:"end3"},[e("td",[e("i",[t._v("*")]),t._v("目的地：")]),e("td",[e("input",{staticClass:"input02 endp",attrs:{id:"data2","data-toggle":"city-picker","data-level":"district",wtmap:"provinceCity",validate:'{"msg":"请选择货物目的地"}',placeholder:"请选择货物目的地"}})])]),t._v(" "),e("tr",{staticClass:"center3"},[e("td",[e("i"),t._v("中转地：")]),e("td",[e("input",{staticClass:"input02 centerp",attrs:{wtmap:"provinceCity",placeholder:"请输入货物中转地"}}),t._v(" "),e("img",{attrs:{id:"add1",src:"images/add.png"}})])]),t._v(" "),e("tr",[e("td",[e("i")]),e("td",[e("span",[t._v("若前往目的地途中需要绕路进行中转，请务必填写中转地，否则绕路途中导致的事故损失将不予赔付")])])]),t._v(" "),e("tr",{staticClass:"start3"},[e("td",[e("i",[t._v("*")]),t._v("起运日期：")]),e("td",[e("input",{staticClass:"input02",attrs:{id:"data3",validate:'{"msg":"请选择日期"}',placeholder:"请选择日期"}})])]),t._v(" "),e("tr",[e("td",[e("i")]),e("td",[e("div",[t._v("起运时间不得早于投保时间")])])]),t._v(" "),e("tr",{staticClass:"car_num"},[e("td",[e("i",[t._v("*")]),t._v("车牌号：")]),e("td",[e("input",{staticClass:"input02",attrs:{id:"data4",maxlength:"15",validate:'{"msg":"请输入车牌号"}',placeholder:"请输入车牌号"}})])]),t._v(" "),e("tr",{staticClass:"start3"},[e("td",[e("i",[t._v("*")]),t._v("运单号：")]),e("td",[e("input",{staticClass:"input02",attrs:{id:"data5",maxlength:"30",validate:'{"msg":"请输入运单号"}',placeholder:"请输入运单号"}})])]),t._v(" "),e("tr",[e("td",[e("i")]),e("td",[e("div",[t._v("若无运单号，可填写合同编号、发货单号或提货单号")])])]),t._v(" "),e("tr",{staticClass:"deductible"},[e("td",[e("i",[t._v("*")]),t._v("免赔额：")]),e("td",{attrs:{id:"insuranceDeductibles"}})]),t._v(" "),e("tr",{staticClass:"fee_total"},[e("td",[e("i",[t._v("*")]),t._v("保费合计：")]),e("td",{attrs:{id:"insuranceFee"}})]),t._v(" "),e("tr",{staticClass:"fee_total"},[e("td",[e("i",[t._v("*")]),t._v("费率：")]),e("td",{attrs:{id:"insuranceRate"}})]),t._v(" "),e("tr",{staticClass:"next_step3"},[e("td",[e("a",{staticClass:"pointer",attrs:{target:"_self",onclick:"window.history.go(-1)"}},[t._v("上一步")])]),e("td",[e("input",{staticClass:"next_button",attrs:{readonly:"",value:"下一步"}})])])])])])])}],!1,null,null,null);a.default=i.exports}}]);