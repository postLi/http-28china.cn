{"version":3,"file":"45a75d99e6803018a41d.js","sources":["webpack:///./pages/wuliu/detail.vue"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nfunction setCredit(item) {\r\n  if (item.credit >= 0 && item.credit <= 3) {\r\n    item.starS = new Array(1)\r\n  }\r\n  if (item.credit >= 4 && item.credit <= 10) {\r\n    item.starS = new Array(2)\r\n  }\r\n  if (item.credit >= 11 && item.credit <= 40) {\r\n    item.starS = new Array(3)\r\n  }\r\n  if (item.credit >= 41 && item.credit <= 90) {\r\n    item.starS = new Array(4)\r\n  }\r\n  if (item.credit >= 91 && item.credit <= 150) {\r\n    item.starS = new Array(5)\r\n  }\r\n  if (item.credit >= 151 && item.credit <= 250) {\r\n    item.starB = new Array(1)\r\n  }\r\n  if (item.credit >= 251 && item.credit <= 500) {\r\n    item.starB = new Array(2)\r\n  }\r\n  if (item.credit >= 501 && item.credit <= 1000) {\r\n    item.starB = new Array(3)\r\n  }\r\n  if (item.credit >= 1001 && item.credit <= 2000) {\r\n    item.starB = new Array(4)\r\n  }\r\n  if (item.credit >= 2001) {\r\n    item.starB = new Array(5)\r\n  }\r\n}\r\nasync function getLogisticsCompany(\r\n  $axios,\r\n  query,\r\n  vo = { parkId: 1, defaultSort: 1 }\r\n) {\r\n  let list,\r\n    parm1 = {\r\n      currentPage: 1,\r\n      pageSize: 100,\r\n      parkId: query.id,\r\n      comAuthStatus: query.comAuthStatus\r\n      // vo\r\n    }\r\n  await $axios.post('/28-web/pointNetwork/findParkNet', parm1).then(res => {\r\n    res.data.data.list.forEach(item => {\r\n      if (JSON.parse(item.productService).length > 0) {\r\n        item.productService1 = (item.productServiceNameList || []).join(' ')\r\n      }\r\n      if (JSON.parse(item.otherService).length > 0) {\r\n        item.otherService1 = (item.otherServiceNameList || []).join(' ')\r\n      }\r\n      setCredit(item)\r\n    })\r\n    if (res.data.status === 200) {\r\n      list = res.data.data.list\r\n    }\r\n  })\r\n  return list\r\n}\r\nasync function getTransportRange($axios, query, vo = {}) {\r\n  let list,\r\n    parm1 = vo\r\n  // parm1 = {\r\n  //   currentPage: 1,\r\n  //   pageSize: 100,\r\n  //   parkId: query.id\r\n  // }\r\n  parm1.currentPage = 1\r\n  parm1.pageSize = 100\r\n  parm1.parkId = query.id\r\n  // console.log(parm1, 'parm1')\r\n  await $axios.post('/28-web/range/park/list/', parm1).then(res => {\r\n    res.data.data.list.forEach(item => {\r\n      item.transportAgingUnit = item.transportAgingUnit.replace('多', '')\r\n    })\r\n    if (res.data.status === 200) {\r\n      list = res.data.data.list\r\n    }\r\n  })\r\n  return list\r\n}\r\nexport default {\r\n  name: 'WuLiu',\r\n  head: {\r\n    link: [\r\n      { rel: 'stylesheet', href: '/css/basic.css' },\r\n      { rel: 'stylesheet', href: '/css/jquery.pagination.css' },\r\n      { rel: 'stylesheet', href: '/css/article_wlyq.css' }\r\n    ],\r\n    script: [\r\n      {\r\n        src:\r\n          'http://api.map.baidu.com/api?v=2.0&ak=e0abRWFWOrgmN7emYjQGPj4Z0vyTVTfo'\r\n      }\r\n    ]\r\n  },\r\n  data() {\r\n    return {\r\n      AF025Name: '不限',\r\n      sortList: [\r\n        { name: '默认排序', orderBy: 'default' },\r\n        { name: '交易量', orderBy: 'orderDesc' },\r\n        { name: '运输时效', orderBy: 'transportAgingAsc' },\r\n        { name: '重货价格', orderBy: 'weigthPriceAsc' }\r\n      ],\r\n      sortName: '默认排序',\r\n      searchWLGS: '',\r\n      searchWDKey: ''\r\n    }\r\n  },\r\n  async asyncData({ $axios, query }) {\r\n    let gatewayData = await $axios.get('/28-web/logisticsPark/' + query.id)\r\n    let jwd = ''\r\n    const longitude = gatewayData.data.data.longitude\r\n    const latitude = gatewayData.data.data.latitude\r\n    if (longitude && latitude) {\r\n      jwd = longitude + ',' + latitude\r\n    }\r\n    let parm = {\r\n      currentPage: 1,\r\n      pageSize: 100,\r\n      vo: {\r\n        parkId: query.id\r\n      }\r\n    }\r\n    // let companysList = await $axios.post(\r\n    //   '/aflc-portal/portalt/aflcLogisticsCompany/v1/recommendCompanys',\r\n    //   parm\r\n    // )\r\n    // companysList.data.data.list.forEach(item => {\r\n    //   setCredit(item)\r\n    // })\r\n    let flag = ''\r\n    let companysList = await $axios.get(\r\n      '/28-web/logisticsCompany/excellent?flag=' + flag\r\n    )\r\n    companysList.data.data.forEach(item => {\r\n      setCredit(item)\r\n    })\r\n\r\n    // console.log(gatewayData.data.data, 'gatewayData.data.data')\r\n    let parm2\r\n    const transportRange = await getTransportRange($axios, query, parm2)\r\n    const logisticsCompany = await getLogisticsCompany($axios, query)\r\n    let AF025 = await $axios.get('/28-web/sysDict/getSysDictByCodeGet/AF025')\r\n    AF025.data.data.unshift({ name: '不限', code: '' })\r\n    // console.log(transportRange, 'transportRange')\r\n    return {\r\n      gatewayData: gatewayData.data.status === 200 ? gatewayData.data.data : {},\r\n      jwd,\r\n      companysList:\r\n        companysList.data.status === 200 ? companysList.data.data : [],\r\n      transportRange: transportRange,\r\n      logisticsCompany: logisticsCompany,\r\n      AF025: AF025.data.status === 200 ? AF025.data.data : []\r\n    }\r\n  },\r\n  mounted() {\r\n    seajs.use(['../js/city-picker.data.js'], function() {\r\n      seajs.use(['../js/city-picker.js'], function() {\r\n        //切换内容 S\r\n        $('#checked_zx').click(function() {\r\n          $('.list_left_zx').css('display', 'block')\r\n          $('#checked_zx').addClass('active')\r\n          $('.list_left_wangdian').css('display', 'none')\r\n          $('#checked_wangdian').removeClass('active')\r\n        })\r\n        $('#checked_wangdian').click(function() {\r\n          $('.list_left_zx').css('display', 'none')\r\n          $('#checked_zx').removeClass('active')\r\n          $('.list_left_wangdian').css('display', 'block')\r\n          $('#checked_wangdian').addClass('active')\r\n        })\r\n\r\n        //切换内容 E\r\n        var locationProvince = $.cookie('currentProvinceFullName')\r\n        var locationCity = $.cookie('currentAreaFullName')\r\n        $('#arc_nav_a1').attr(\r\n          'href',\r\n          '/wuliu?tid=1' +\r\n            '&locationProvince=' +\r\n            locationProvince +\r\n            '&locationCity=' +\r\n            locationCity\r\n        )\r\n        $('#arc_nav_a1').html(locationCity + '物流园区')\r\n      })\r\n    })\r\n  },\r\n  methods: {\r\n    async searchWlLine() {\r\n      let list1 = [],\r\n        list2 = []\r\n      $('#wlLineFrom .select-item').each(function(i, e) {\r\n        list1.push($(this).text())\r\n      })\r\n      let startp = list1[0]\r\n      let startc = list1[1]\r\n      let starta = list1[2]\r\n\r\n      $('#wlLineTo .select-item').each(function(i, e) {\r\n        list2.push($(this).text())\r\n      })\r\n      let endp = list2[0]\r\n      let endc = list2[1]\r\n      let enda = list2[2]\r\n      this.transportRange = await getTransportRange(\r\n        this.$axios,\r\n        this.$route.query,\r\n        {\r\n          companyName: this.searchWLGS,\r\n          endArea: enda,\r\n          endCity: endc,\r\n          endProvince: endp,\r\n          startArea: starta,\r\n          startCity: startc,\r\n          startProvince: startp\r\n        }\r\n      )\r\n      // console.log(this.transportRange, ' this.transportRange')\r\n    },\r\n    async flush() {\r\n      $('#wlLineFrom input').citypicker('reset')\r\n      $('#wlLineTo input').citypicker('reset')\r\n      this.AF025Name = '不限'\r\n      this.sortName = '默认排序'\r\n      this.searchWLGS = ''\r\n      this.transportRange = await getTransportRange(\r\n        this.$axios,\r\n        this.$route.query\r\n      )\r\n    },\r\n    searchWD() {\r\n      window.open('/gongsi?&wangdian=' + this.searchWDKey)\r\n    },\r\n    async selectSort(item) {\r\n      let list1 = [],\r\n        list2 = []\r\n      // console.log(item, 'item2')\r\n      $('#wlLineFrom .select-item').each(function(i, e) {\r\n        list1.push($(this).text())\r\n      })\r\n      let startp = list1[0]\r\n      let startc = list1[1]\r\n      let starta = list1[2]\r\n\r\n      $('#wlLineTo .select-item').each(function(i, e) {\r\n        list2.push($(this).text())\r\n      })\r\n      let endp = list2[0]\r\n      let endc = list2[1]\r\n      let enda = list2[2]\r\n      this.sortName = item.name\r\n      this.transportRange = await getTransportRange(\r\n        this.$axios,\r\n        this.$route.query,\r\n        {\r\n          companyName: this.searchWLGS,\r\n          endArea: enda,\r\n          endCity: endc,\r\n          endProvince: endp,\r\n          startArea: starta,\r\n          startCity: startc,\r\n          startProvince: startp,\r\n          orderBy: item.orderBy\r\n        }\r\n        // orderBy:item.vo\r\n      )\r\n    },\r\n    async selectAF025(item) {\r\n      let list1 = [],\r\n        list2 = []\r\n      $('#wlLineFrom .select-item').each(function(i, e) {\r\n        list1.push($(this).text())\r\n      })\r\n      let startp = list1[0]\r\n      let startc = list1[1]\r\n      let starta = list1[2]\r\n\r\n      $('#wlLineTo .select-item').each(function(i, e) {\r\n        list2.push($(this).text())\r\n      })\r\n      let endp = list2[0]\r\n      let endc = list2[1]\r\n      let enda = list2[2]\r\n      this.AF025Name = item.name\r\n      // console.log(item.code, 'item.code')\r\n      this.transportRange = await getTransportRange(\r\n        this.$axios,\r\n        this.$route.query,\r\n        // { otherServiceCode: item.code },\r\n        {\r\n          companyName: this.searchWLGS,\r\n          endArea: enda,\r\n          endCity: endc,\r\n          endProvince: endp,\r\n          startArea: starta,\r\n          startCity: startc,\r\n          startProvince: startp,\r\n          otherServiceCode: item.code\r\n        }\r\n      )\r\n    },\r\n    map_init() {\r\n      let map = new BMap.Map('allmap')\r\n      let jwd = this.jwd ? this.jwd : '113.339865,23.138652'\r\n      let newLoc = jwd.split(',')\r\n      let point = new BMap.Point(parseFloat(newLoc[0]), parseFloat(newLoc[1]))\r\n      map.centerAndZoom(point, 17)\r\n      let marker = new BMap.Marker(point) // 创建标注\r\n      map.addOverlay(marker) // 将标注添加到地图中\r\n      marker.setAnimation(BMAP_ANIMATION_BOUNCE) //跳动的动画\r\n\r\n      //添加地图类型控件\r\n\r\n      map.addControl(\r\n        new BMap.MapTypeControl({\r\n          mapTypes: [BMAP_NORMAL_MAP, BMAP_HYBRID_MAP]\r\n        })\r\n      )\r\n      map.setCurrentCity('广州') // 设置地图显示的城市 此项是必须设置的\r\n      map.enableScrollWheelZoom(true) //开启鼠标滚轮缩放\r\n      var opts = { type: BMAP_NAVIGATION_CONTROL_SMALL }\r\n      map.addControl(new BMap.NavigationControl(opts))\r\n    },\r\n    map_block() {\r\n      $('#allmap').css('display', 'block')\r\n    },\r\n    seeMap() {\r\n      this.map_block()\r\n      this.map_init()\r\n    }\r\n  }\r\n}\r\n"],"mappings":"AA0WA","sourceRoot":""}