webpackJsonp([4],{"/OH/":function(e,t,i){"use strict";function r(e){i("xT+W")}var n=i("xoQy"),a=i("qZ1X"),o=i("VU/8"),s=r,l=o(n.a,a.a,s,"data-v-173f2f52",null);t.a=l.exports},"0SzW":function(e,t){},"1JI3":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"create-carinfo identification page-main"},[i("div",{staticClass:"carrierTitle"},[i("div",{staticClass:"realname"},[i("h2",[e._v(e._s(e.title))])]),e._v(" "),e._m(0)]),e._v(" "),i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,size:"mini","label-width":"100px"}},[i("div",{staticClass:"car-baseinfo-wrapper"},[i("div",{staticClass:"tab-info-stitle"},[i("strong",[e._v("基本信息：")]),e._v("("),i("span",{staticClass:"important"},[e._v("带*为必填项")]),e._v(")")]),e._v(" "),i("div",{staticClass:"car-base-info clearfix"},[i("el-form-item",{attrs:{required:"",label:"车牌号"}},[i("el-input",{attrs:{maxlength:"15"},model:{value:e.ruleForm.carNum,callback:function(t){e.$set(e.ruleForm,"carNum",t)},expression:"ruleForm.carNum"}})],1),e._v(" "),i("el-form-item",{attrs:{required:"",label:"车辆类型"}},[i("selectType",{attrs:{type:"AF018",clearable:"",size:"mini"},model:{value:e.ruleForm.carType,callback:function(t){e.$set(e.ruleForm,"carType",t)},expression:"ruleForm.carType"}})],1),e._v(" "),i("el-form-item",{staticClass:"carvinfo",attrs:{required:"",label:"车长"}},[e._v("\n        长 "),i("input",{directives:[{name:"number-only",rawName:"v-number-only:point1",arg:"point1"}],staticClass:"nativeinput",attrs:{maxlength:4,placeholder:"","auto-complete":"off",clearable:"",type:"text"},domProps:{value:e.ruleForm.carLength},on:{change:function(t){e.setInputVal(t.target.value,e.ruleForm,"carLength")}}}),e._v(" "),e._v("\n        宽 "),i("input",{directives:[{name:"number-only",rawName:"v-number-only:point1",arg:"point1"}],staticClass:"nativeinput",attrs:{maxlength:4,placeholder:"","auto-complete":"off",clearable:"",type:"text"},domProps:{value:e.ruleForm.carWidth},on:{change:function(t){e.setInputVal(t.target.value,e.ruleForm,"carWidth")}}}),e._v(" "),e._v("\n        高 "),i("input",{directives:[{name:"number-only",rawName:"v-number-only:point1",arg:"point1"}],staticClass:"nativeinput",attrs:{maxlength:4,placeholder:"","auto-complete":"off",clearable:"",type:"text"},domProps:{value:e.ruleForm.carHeight},on:{change:function(t){e.setInputVal(t.target.value,e.ruleForm,"carHeight")}}})]),e._v(" "),i("el-form-item",{attrs:{required:"",label:"车辆载重"}},[i("div",{staticClass:"el-input-group"},[i("input",{directives:[{name:"numberOnly",rawName:"v-numberOnly:point1",arg:"point1"}],staticClass:"nativeinput",attrs:{maxlength:5,placeholder:"","auto-complete":"off",clearable:"",type:"text"},domProps:{value:e.ruleForm.carLoad},on:{change:function(t){e.setInputVal(t.target.value,e.ruleForm,"carLoad")}}}),e._v(" "),i("div",{staticClass:"el-input-group__append"},[e._v("（吨）")])])]),e._v(" "),i("el-form-item",{attrs:{required:"",label:"车辆体积"}},[i("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.carVolume,callback:function(t){e.$set(e.ruleForm,"carVolume",t)},expression:"ruleForm.carVolume"}},[i("template",{slot:"append"},[e._v("（立方米）")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:"车辆规格"}},[i("selectType",{attrs:{type:"AF009",clearable:"",size:"mini"},model:{value:e.ruleForm.carSpec,callback:function(t){e.$set(e.ruleForm,"carSpec",t)},expression:"ruleForm.carSpec"}})],1),e._v(" "),i("el-form-item",{attrs:{required:"",label:"车辆常驻地"}},[i("vregion",{staticClass:"form-control",attrs:{ui:!0,ifAera:!0},on:{values:e.regionChangeUsual,testCity:function(t){e.ifProvice("usualPlace")}}},[i("el-input",{attrs:{placeholder:"车辆常驻地"},model:{value:e.ruleForm.usualPlace,callback:function(t){e.$set(e.ruleForm,"usualPlace",t)},expression:"ruleForm.usualPlace"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{required:"",label:"车源类型"}},[i("el-radio-group",{model:{value:e.ruleForm.carSourceType,callback:function(t){e.$set(e.ruleForm,"carSourceType",t)},expression:"ruleForm.carSourceType"}},[i("el-radio",{attrs:{label:"AF01801"}},[e._v("回程车")]),e._v(" "),i("el-radio",{attrs:{label:"AF01802"}},[e._v("本地车")])],1)],1),e._v(" "),i("el-form-item",{attrs:{required:"",label:"出发地"}},[i("vregion",{staticClass:"form-control",attrs:{ui:!0,ifAera:!0},on:{values:e.regionChangeStart,testCity:function(t){e.ifProvice("strartAddress")}}},[i("el-input",{attrs:{placeholder:"出发地"},model:{value:e.ruleForm.strartAddress,callback:function(t){e.$set(e.ruleForm,"strartAddress",t)},expression:"ruleForm.strartAddress"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{required:"",label:"到达地"}},[i("vregion",{staticClass:"form-control",attrs:{ui:!0,ifAera:!0},on:{values:e.regionChangeEnd,testCity:function(t){e.ifProvice("endAddress")}}},[i("el-input",{attrs:{placeholder:"到达地"},model:{value:e.ruleForm.endAddress,callback:function(t){e.$set(e.ruleForm,"endAddress",t)},expression:"ruleForm.endAddress"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"途径点"}},[i("el-input",{model:{value:e.ruleForm.viaAddress,callback:function(t){e.$set(e.ruleForm,"viaAddress",t)},expression:"ruleForm.viaAddress"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发车时间"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:e.ruleForm.startTime,callback:function(t){e.$set(e.ruleForm,"startTime",t)},expression:"ruleForm.startTime"}})],1),e._v(" "),i("el-form-item",{staticClass:"carinfo-expect",attrs:{label:"期望运价"}},[i("input",{directives:[{name:"number-only",rawName:"v-number-only:point1",arg:"point1"}],staticClass:"nativeinput",attrs:{maxlength:9,placeholder:"","auto-complete":"off",clearable:"",type:"text"},domProps:{value:e.ruleForm.expectPrice},on:{change:function(t){e.setInputVal(t.target.value,e.ruleForm,"expectPrice")}}}),e._v("元/车  （运价不填自动为面议）\n          ")]),e._v(" "),i("el-form-item",{attrs:{label:"即时/长期"}},[i("el-radio-group",{model:{value:e.ruleForm.isLongCar,callback:function(t){e.$set(e.ruleForm,"isLongCar",t)},expression:"ruleForm.isLongCar"}},[i("el-radio",{attrs:{label:"1"}},[e._v("即时车源")]),e._v(" "),i("el-radio",{attrs:{label:"0"}},[e._v("长期车源")])],1)],1)],1),e._v(" "),i("div",{staticClass:"carinfo-remark"},[i("el-form-item",{attrs:{label:"备注"}},[i("div",{staticClass:"label-content clearfix"},e._l(e.labelArr,function(t,r){return i("span",{key:r,class:{active:t.ischeck},on:{click:function(i){e.selectTag(t)}}},[e._v(e._s(t.name))])})),e._v(" "),i("el-input",{attrs:{type:"textarea",rows:2,maxlength:"30",placeholder:"请输入备注"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}}),e._v("\n        请填写备注（"+e._s(e.ruleForm.remark.length)+"-30字）。"),i("span",{staticClass:"important-info"},[e._v("提供“原创”说明有利于提升线路效果")])],1)],1)]),e._v(" "),i("div",{staticClass:"car-picinfo"},[i("div",{staticClass:"tab-info-stitle"},[i("strong",[e._v("车主认证照片：")]),i("span",{staticClass:"important"},[e._v("（上传的图片不超过5M，并且为JPG/PNG/JPEG中的一种格式）")])]),e._v(" "),i("el-form-item",{attrs:{required:""}},[i("span",{staticClass:"info-require"},[e._v("上传车辆45°照片")]),e._v(" "),i("upload",{attrs:{limit:5,listtype:"picture-card",title:"身份证",showFileList:!0},model:{value:e.ruleForm.carFile,callback:function(t){e.$set(e.ruleForm,"carFile",t)},expression:"ruleForm.carFile"}})],1)],1),e._v(" "),i("div",{staticClass:"car-submit"},[i("el-button",{attrs:{type:"info"},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),i("el-button",{staticClass:"create-carinfo-btn",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即发布")])],1)])],1)},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"prompt"},[i("p",[i("span",{staticClass:"tishi"},[i("i",{staticClass:"el-icon-warning"}),e._v("小提示： ")]),e._v("(打"),i("span",{staticClass:"star"},[e._v("*")]),e._v("号为必填项)")])])}],a={render:r,staticRenderFns:n};t.a=a},"1jhZ":function(e,t,i){"use strict";function r(e){return m.b.get("/aflc-uc/usercenter/aflcCarInfo/v1/getDetails/"+e)}function n(e){return m.b.post("/aflcusercenterservice/usercenter/aflcDriver/v1/completeCarInfo",e)}function a(e){return m.b.post("/aflcusercenterservice/usercenter/aflcCarInfo/v1/addCarInfo",e)}function o(e){return m.b.delete("/aflc-uc/usercenter/aflcCarInfo/v1/delete/"+e)}function s(e){return m.b.post("/aflc-uc/usercenter/aflcCarInfo/v1/list",e).then(function(e){return e.data||{list:[],totalCount:0}})}function l(){return m.b.post("/aflcusercenterservice/usercenter/aflcDriver/v1/getCarInfo")}function c(e){return m.b.post("/aflcusercenterservice/usercenter/aflcCarInfo/v1/updateCarInfo",e)}function u(e,t){return m.b.put("/aflc-uc/usercenter/aflcCarInfo/v1/setEnableType/"+e+"/"+t)}function d(e,t){return m.b.put("/aflc-uc/usercenter/aflcCarInfo/v1/setRouteType/"+e+"/"+t)}function h(e){return m.b.axios({url:"/aflc-uc/usercenter/aflcDriver/v1/authAflcDriver",method:"post",data:e})}t.b=r,t.f=n,t.e=a,t.a=o,t.c=s,t.g=l,t.h=c,t.i=u,t.j=d,t.d=h;var m=i("Vo7i")},"3QU7":function(e,t,i){"use strict";function r(e){i("5xKW")}var n=i("b79V"),a=i("6BtH"),o=i("VU/8"),s=r,l=o(n.a,a.a,s,null,null);t.a=l.exports},"5xKW":function(e,t){},"6BtH":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{"custom-class":"aflcmap-pop-wrapper",title:"地图",visible:e.dialogTableVisible},on:{close:e.close,"update:visible":function(t){e.dialogTableVisible=t}}},[i("div",{attrs:{id:"mapcontainer"}}),e._v(" "),i("div",{attrs:{id:"myPageTop"}},[i("table",[i("tr",[i("td",[i("label",[e._v("请输入关键字：")])])]),e._v(" "),i("tr",[i("td",[i("input",{ref:"tipinput",attrs:{id:"tipinput"}})])])])]),e._v(" "),i("div",{staticClass:"aflcmap-pop-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"addrname"},[e._v("当前选中的地址："+e._s(this.thename)),i("br"),e._v("当前经纬度信息："+e._s(this.thepos))]),e._v(" "),i("el-button",{attrs:{type:"primary",disabled:e.noinfo},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),i("el-button",{attrs:{type:"info"},on:{click:e.close}},[e._v("取 消")])],1)])},n=[],a={render:r,staticRenderFns:n};t.a=a},"8sHD":function(e,t,i){var r=i("kM2E"),n=i("KpO7");r(r.S+r.F*(Number.parseInt!=n),"Number",{parseInt:n})},"9UCZ":function(e,t,i){"use strict";var r=i("TuGF"),n=i("GrA4"),a=i("VU/8"),o=a(r.a,n.a,null,null,null);t.a=o.exports},BpPu:function(e,t){},GrA4:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-select",e._b({ref:"myautocomplete",attrs:{placeholder:e.placeholder},on:{change:e.change},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},"el-select",e.$attrs,!1),[e._t("head"),e._v(" "),e._l(e.types,function(t){return[e._t("default",[i("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})],{item:t})]}),e._v(" "),e._t("foot")],2)},n=[],a={render:r,staticRenderFns:n};t.a=a},IC5i:function(e,t,i){"use strict";var r=i("woOf"),n=i.n(r),a=i("9UCZ"),o=i("Zjyc"),s=(i("3QU7"),i("t5DY")),l=i("1jhZ"),c=i("mcg1");t.a={components:{selectType:a.a,upload:o.a,vregion:c.a},mounted:function(){var e=this;this.id=this.$route.query.id,this.initLabel().then(function(){e.id?e.initModify():e.initNew()})},data:function(){return{id:"",title:"发布",ifDisable:!1,popVisible:!1,labelArr:[],rules:{},current:"",ruleForm:{belongDriver:"",carFile:"",carHeight:"",carLength:"",carLoad:"",carNum:"",carSourceType:"",carSpec:"",carTag:"",carTagName:"",carType:"",carVolume:"",carWidth:"",driverId:"",endAddress:"",endAddressCoordinate:"",endProvince:"",endCity:"",endArea:"",expectPrice:"",isLongCar:"",remark:"",startTime:"",strartAddress:"",startProvince:"",startCity:"",startArea:"",strartAddressCoordinate:"",title:"",usualPlace:"",usualPlaceCoordinate:"",viaAddress:""}}},watch:{"ruleForm.carLength":{handler:function(){this.getCarVolum()}},"ruleForm.carWidth":{handler:function(){this.getCarVolum()}},"ruleForm.carHeight":{handler:function(){this.getCarVolum()}}},methods:{setInputVal:function(e,t,i){this.$set(t,i,e)},getValue:function(e){return e?e.value:""},regionChangeUsual:function(e){this.ruleForm.usualPlace=e.province||e.city||e.area||e.town?(""+this.getValue(e.province)+this.getValue(e.city)+this.getValue(e.area)+this.getValue(e.town)).trim():""},regionChangeStart:function(e){e.province||e.city||e.area||e.town?(this.ruleForm.strartAddress=(""+this.getValue(e.province)+this.getValue(e.city)+this.getValue(e.area)+this.getValue(e.town)).trim(),this.ruleForm.startProvince=this.getValue(e.province),this.ruleForm.startCity=this.getValue(e.city),this.ruleForm.startArea=this.getValue(e.area)):this.ruleForm.strartAddress=""},regionChangeEnd:function(e){e.province||e.city||e.area||e.town?(this.ruleForm.endAddress=(""+this.getValue(e.province)+this.getValue(e.city)+this.getValue(e.area)+this.getValue(e.town)).trim(),this.ruleForm.endProvince=this.getValue(e.province),this.ruleForm.endCity=this.getValue(e.city),this.ruleForm.endArea=this.getValue(e.area)):this.ruleForm.endAddress=""},ifProvice:function(e){return console.log("ifProvice",e),this.$message({type:"info",message:"至少选择到市级范围"}),"usualPlace"==e?this.ruleForm.usualPlace="":"strartAddress"==e?this.ruleForm.strartAddress="":this.ruleForm.endAddress=""},initModify:function(){var e=this;l.b(this.id).then(function(t){var i=t.data;for(var r in e.ruleForm)e.ruleForm[r]=i[r];var n=i.carTag.split("|");console.log(n,e.labelArr),e.labelArr=e.labelArr.map(function(e){return-1!==n.indexOf(e.code)&&(e.ischeck=!0),e}),e.isModify=!0,e.title="修改"}).catch(function(){e.$message.error("查找不到相关信息~"),e.initNew()})},initNew:function(){this.ruleForm.belongDriver=this.otherinfo.contactsName,this.ruleForm.driverId=this.otherinfo.id},initLabel:function(){var e=this;return Object(s.f)("AF042").then(function(t){e.labelArr=t.map(function(e){var t=e;return t.ischeck=!1,t})})},selectTag:function(e){e.ischeck=!e.ischeck},getCarVolum:function(){this.ruleForm.carVolume=this.ruleForm.carLength*this.ruleForm.carWidth*this.ruleForm.carHeight,this.ruleForm.carVolume=this.ruleForm.carVolume?this.ruleForm.carVolume.toFixed(2):0},getInfo:function(e,t,i){switch(this.current){case"strartAddress":this.ruleForm.strartAddress=t,this.ruleForm.strartAddressCoordinate=e;break;case"endAddress":this.ruleForm.endAddress=t,this.ruleForm.endAddressCoordinate=e;break;case"usualPlace":this.ruleForm.usualPlace=t,this.ruleForm.usualPlaceCoordinate=e}},showMap:function(e){this.popVisible=!0,this.current=e},resetForm:function(){this.ruleForm=this.$options.data().ruleForm},checkValue:function(e){return e.carNum?e.carType?e.carLength?e.carWidth?e.carHeight?e.carLoad?e.usualPlace?e.carSourceType?e.strartAddress?e.endAddress?!!e.carFile||(this.$message.error("请上传车辆45°照片。"),!1):(this.$message.error("请填写车辆到达地。"),!1):(this.$message.error("请填写车辆出发地。"),!1):(this.$message.error("请选择车源类型。"),!1):(this.$message.error("请填写车辆常驻地。"),!1):(this.$message.error("请填写车辆载重。"),!1):(this.$message.error("请填写车辆高度。"),!1):(this.$message.error("请填写车辆宽度。"),!1):(this.$message.error("请填写车辆长度。"),!1):(this.$message.error("请选择车辆类型。"),!1):(this.$message.error("请填写车牌号。"),!1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var i=n()({},t.ruleForm);if(!1===t.checkValue(i))return!1;t.loading=!0,i.title=i.strartAddress+"->"+i.endAddress,i.carTag=t.labelArr.filter(function(e){return e.ischeck}).map(function(e){return e.code}).join("|"),i.carTagName=t.labelArr.filter(function(e){return e.ischeck}).map(function(e){return e.name}).join("|");var r=void 0;t.isModify?(i.id=t.id,r=l.h(i)):r=l.f(i),r.then(function(e){t.loading=!1,t.$alert("操作成功","提示",{confirmButtonText:"确定",callback:function(e){t.$emit("success"),t.eventBus.$emit("replaceCurrentView","/carinfo/manage")}})}).catch(function(e){t.loading=!1})})}}}},KpO7:function(e,t,i){var r=i("7KvD").parseInt,n=i("mnVu").trim,a=i("hyta"),o=/^[-+]?0[xX]/;e.exports=8!==r(a+"08")||22!==r(a+"0x16")?function(e,t){var i=n(String(e),3);return r(i,t>>>0||(o.test(i)?16:10))}:r},"M/vH":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{hideUploadBtn:e.filelist.length>=e.limit}},[e.uploadUrl?i("el-upload",{attrs:{drag:"",data:e.upload,action:e.uploadUrl,multiple:!1,"list-type":"picture-card","show-file-list":e.showFileList,"file-list":e.filelist,limit:e.limit,"before-upload":e.beforeUpload,"on-preview":e.handlePictureCardPreview,"on-error":e.handleError,"on-exceed":e.onexceed,"on-success":e.handleImageScucess,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]):e._e(),e._v(" "),i("el-dialog",{attrs:{"lock-scroll":"","custom-class":"pop-show-img-wrapper",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{staticClass:"pop-show-img",attrs:{src:e.dialogImageUrl,alt:""}})])],1)},n=[],a={render:r,staticRenderFns:n};t.a=a},TuGF:function(e,t,i){"use strict";var r=i("Dd8w"),n=i.n(r),a=i("O6e2"),o=i("t5DY"),s=i("NYxO"),l=i("TuU3");t.a={name:"selectType",props:{orgid:{type:[Number,String],default:""},type:{type:String,default:"",required:!0},placeholder:{type:String,default:"请选择"},value:{type:[Number,String,Array]},remote:{type:Boolean,default:!1}},computed:n()({},Object(s.b)(["otherinfo"])),data:function(){return{val:"",types:[],dataCache:{}}},watch:{value:{handler:function(e){this.val=e||""},immediate:!0}},mounted:function(){var e=this;if(this.remote)this.fetchData();else{var t=l.a.get(this.type);""===t?this.fetchData():this.types=t}a.a.$on("closepopbox",function(){console.log("closepopbox selectType:"),e.$refs.myautocomplete.handleClose()})},methods:{fetchData:function(){var e=this,t=function(t){e.types=t,l.a.set(e.type,t)};this.dataCache[this.type]?t(this.dataCache[this.type]):Object(o.f)(this.type,this.orgid||this.otherinfo.companyId).then(t)},change:function(e){this.$emit("change",e),this.$emit("input",this.val)}}}},TuU3:function(e,t,i){"use strict";window.TMS_DATA_CACHE={};var r={get:function(e){return window.TMS_DATA_CACHE[e]||""},set:function(e,t){return window.TMS_DATA_CACHE[e]=t,t}};t.a=r},UZPH:function(e,t,i){"use strict";t.a={cn:{pleaseSelect:"请选择"},en:{pleaseSelect:"Please select"}}},Zjyc:function(e,t,i){"use strict";function r(e){i("0SzW")}var n=i("aHTF"),a=i("M/vH"),o=i("VU/8"),s=r,l=o(n.a,a.a,s,null,null);t.a=l.exports},ZkSE:function(e,t,i){"use strict";function r(e){i("xzx5")}Object.defineProperty(t,"__esModule",{value:!0});var n=i("IC5i"),a=i("1JI3"),o=i("VU/8"),s=r,l=o(n.a,a.a,s,null,null);t.default=l.exports},aHTF:function(e,t,i){"use strict";var r=i("//Fk"),n=i.n(r),a=i("t5DY"),o=i("0xDb");t.a={name:"singleImageUpload",props:{value:[String,Array],title:{type:String,default:""},tip:{type:String,default:"（jpg/png。小于5M）"},size:{type:String,default:"mini"},showFileList:{type:Boolean,default:!1},limit:{type:Number,default:10},listtype:{type:String,default:"picture",enum:["text","picture","picture-card"]},disabled:{type:Boolean,default:!1}},computed:{imageUrl:function(){return this.value}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,tempUrl:"",dataObj:{token:"",key:""},upload:{key:"",policy:"",OSSAccessKeyId:"",success_action_status:"201",signature:""},uploadUrl:"",dir:"",filelist:[]}},watch:{value:{handler:function(e){if(this.showFileList){var t=Array.isArray(e)?e:e?e.split(","):[];t=t.filter(function(e){return e}),this.filelist=t.map(function(e){var t={};return t.url=e,t})}},immediate:!0}},mounted:function(){this.init()},methods:{init:function(){var e=this;Object(a.h)().then(function(t){e.upload.OSSAccessKeyId=t.accessid,e.upload.policy=t.policy,e.upload.signature=t.signature,e.uploadUrl=t.host,e.dir=t.dir,e.upload.key=t.dir+e.random_string()+type})},rmImage:function(){this.emitInput("")},onexceed:function(e,t){this.$message.error("最多上传 "+this.limit+" 张!")},handleRemove:function(e,t){console.log("handleRemove:",e,t),this.filelist=t,this.emitInput()},random_string:function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",i=t.length,r="",n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*i));return r},emitInput:function(e){e&&this.filelist.push({url:e}),this.$emit("input",this.showFileList?this.filelist.map(function(e){return e.url}).join(","):e)},handleImageScucess:function(e){var t="";-1!==e.indexOf("Location")&&(t=e.match(/<Location>([^<]+)<\/Location>/m),t=t?t[1]:""),this.emitInput(t)},handleError:function(e){this.$emit("error",e)},beforeUpload:function(e){var t=this,i=/image\/\w+/.test(e.type)&&/(jpe?g|png)/i.test(e.type),r=e.size/1024/1024<5,a=e.name.match(/([^\.]+)$/);return a=a?"."+a[1]:"",new n.a(function(e,n){i?r?(t.upload.key=t.dir+Object(o.e)(new Date,"{y}{m}{d}")+"/"+t.random_string()+a,e(!0)):(t.$message.error("上传头像图片大小不能超过 5MB!"),n(!1)):(t.$message.error("上传头像图片只能是 JPG/PNG 格式!"),n(!1))})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}}},b79V:function(e,t,i){"use strict";var r=i("0xDb");t.a={props:{pos:{type:[String,Array],default:""},name:{type:String,default:""},popVisible:{type:Boolean,default:!1}},watch:{popVisible:function(e){this.init()},name:function(){this.thename=this.name},pos:function(){this.thepos=this.pos}},mounted:function(){var e=this;window.loadedGaodeMap=function(){e.initMap(),e.hasLoadedMap=!0}},created:function(){},destoryed:function(){this.exit()},data:function(){return{noinfo:!0,dialogTableVisible:!1,thepos:"",thename:"",theobj:{}}},methods:{exit:function(){this.map&&this.map.destroy&&"function"==typeof this.map.destroy&&(this.map.destroy(),this.map={}),this.thepos="",this.thename="",this.theobj={},this.noinfo=!0},init:function(){this.dialogTableVisible=this.popVisible,console.log("this.popVisible:",this.popVisible),this.popVisible&&(this.thepos=this.pos,this.thename=this.name,this.loadMap())},loadMap:function(){var e=this;window.AMap?setTimeout(function(){e.initMap()},500):Object(r.c)("https://webapi.amap.com/maps?v=1.4.8&key=e61aa7ddc6349acdb3b57c062080f730&plugin=AMap.Autocomplete,AMap.PlaceSearch,AMap.Geocoder&callback=loadedGaodeMap").then(function(){})},close:function(e){this.exit(),this.$emit("update:popVisible",!1),"function"==typeof e&&e()},initMap:function(){function e(){d&&(d.setMap(null),d=null)}function t(t){console.log("2222",t),m.getAddress(t,function(r,n){"complete"===r&&"OK"===n.info?i(n,t):(e(),alert("获取不到当前位置的地址信息~"))})}function i(e,t){console.log("1111111111111",t);var i=!!t.lat;console.log("geocodeer:",e);var r=e.regeocode.formattedAddress;i&&(d=new a.Marker({map:o,position:t}),d.on("click",function(e){h.open(o,e.target.getPosition())}),d.emit("click",{target:d}),h.setContent(r)),n.setData(i?t.lng+","+t.lat:t,r,e.regeocode)}function r(e){console.log("select e:",e),c.setCity(e.poi.adcode),c.search(e.poi.name)}var n=this,a=window.AMap;window.AMapUI;n.map=new a.Map("mapcontainer",{resizeEnable:!0});var o=this.map,s={input:"tipinput"},l=new a.Autocomplete(s),c=new a.PlaceSearch({map:o,extensions:"base"}),u=this.name;u&&(this.$refs.tipinput.value=u.replace("市辖区",""),c.search(u));var d,h=new a.InfoWindow({offset:new a.Pixel(0,-30),content:""}),m=new a.Geocoder({radius:1e3}),f=new a.ContextMenu,p=[];f.addItem("添加标记",function(i){e(),c.clear(),h.close(),t(p)},3),o.on("rightclick",function(e){console.log("right click:",e);var t=e.lnglat;f.open(o,t),p=t}),o.on("click",function(e){console.log("e:",e)}),o.plugin(["AMap.ToolBar"],function(){o.addControl(new a.ToolBar)}),a.event.addListener(l,"select",r),a.event.addListener(c,"markerClick",function(e){t(e.data.location)})},setData:function(e,t,i){this.thepos=e,this.thename=t,this.theobj=i,this.noinfo=!1,console.log(i)},submitForm:function(){this.$emit("success",this.thepos,this.thename,this.theobj),this.close()}}}},gBtx:function(e,t,i){e.exports={default:i("qrpI"),__esModule:!0}},hyta:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},keop:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[!e.ui&&e.text?i("span",[e._v("\n        "+e._s(e.itemProvince&&e.itemProvince.value)+e._s(e.itemCity&&e.itemCity.value)+e._s(e.itemArea&&e.itemArea.value)+e._s(e.itemTown&&e.itemTown.value)+"\n    ")]):e._e(),e._v(" "),e.text||e.ui||!e.province?e._e():i("select",{directives:[{name:"model",rawName:"v-model",value:e.nowProvince,expression:"nowProvince"}],class:e.className,on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.nowProvince=t.target.multiple?i:i[0]}}},[e.blank?i("option",{attrs:{value:""}},[e._v(e._s(e.lang.pleaseSelect))]):e._e(),e._v(" "),e._l(e.listProvince,function(t){return i("option",{key:t.key,domProps:{value:t.key}},[e._v(e._s(t.value))])})],2),e._v(" "),!e.text&&!e.ui&&e.city&&e.haveCity?i("select",{directives:[{name:"model",rawName:"v-model",value:e.nowCity,expression:"nowCity"}],class:e.className,on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.nowCity=t.target.multiple?i:i[0]}}},[e.blank?i("option",{attrs:{value:""}},[e._v(e._s(e.lang.pleaseSelect))]):e._e(),e._v(" "),e._l(e.listCity,function(t){return i("option",{key:t.key,domProps:{value:t.key}},[e._v(e._s(t.value))])})],2):e._e(),e._v(" "),!e.text&&!e.ui&&(e.area&&e.city||!e.haveCity)&&e.listArea.length?i("select",{directives:[{name:"model",rawName:"v-model",value:e.nowArea,expression:"nowArea"}],class:e.className,on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.nowArea=t.target.multiple?i:i[0]}}},[e.blank?i("option",{attrs:{value:""}},[e._v(e._s(e.lang.pleaseSelect))]):e._e(),e._v(" "),e._l(e.listArea,function(t){return i("option",{key:t.key,domProps:{value:t.key}},[e._v(e._s(t.value))])})],2):e._e(),e._v(" "),!e.text&&!e.ui&&e.town&&e.area&&e.city?i("select",{directives:[{name:"model",rawName:"v-model",value:e.nowTown,expression:"nowTown"}],class:e.className,on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.nowTown=t.target.multiple?i:i[0]}}},[e.blank?i("option",{attrs:{value:""}},[e._v(e._s(e.lang.pleaseSelect))]):e._e(),e._v(" "),e._l(e.listTown,function(t){return i("option",{key:t.key,domProps:{value:t.key}},[e._v(e._s(t.value))])})],2):e._e(),e._v(" "),e.ui?i("div",{ref:"caller",staticClass:"caller-container",on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.showDropdown(!0)}}},[e._t("default")],2):e._e(),e._v(" "),e.ui?i("v-dropdown",{ref:"dropdown"},[i("div",{staticClass:"rg-header"},[i("h3",[i("span",{directives:[{name:"show",rawName:"v-show",value:!(e.itemProvince||e.itemCity||e.itemArea||e.itemTown),expression:"!itemProvince&&!itemCity&&!itemArea&&!itemTown"}]},[e._v("行政区划选择器")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.itemProvince||e.itemCity||e.itemArea||e.itemTown,expression:"itemProvince||itemCity||itemArea||itemTown"}],staticClass:"rg-header-selected"},[e._v("\n                    "+e._s(e.itemProvince&&e.itemProvince.value)+e._s(e.itemCity&&e.itemCity.value)+e._s(e.itemArea&&e.itemArea.value)+e._s(e.itemTown&&e.itemTown.value)+"\n                ")])]),e._v(" "),i("button",{staticClass:"rg-removeall-button",attrs:{type:"button",title:"清除选择"},on:{click:e.clear}},[i("i",{staticClass:"iconfont icon-removeall"})]),e._v(" "),i("button",{staticClass:"rg-done-button",attrs:{type:"button",title:"完成"},on:{click:function(t){e.showDropdown(!1)}}},[i("i",{staticClass:"iconfont icon-selected"})])]),e._v(" "),e.search?i("div",{staticClass:"rg-search"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.query,expression:"query",modifiers:{trim:!0}}],ref:"input",staticClass:"rg-input",attrs:{type:"text",autocomplete:"off"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]):e._e(),e._v(" "),i("div",{staticClass:"rg-level-tabs"},[i("ul",e._l(e.levels,function(t,r){return e.checkAvailable(r)?i("li",{key:r},[i("a",{class:{active:r===e.levelIndex},attrs:{href:"javascript:void(0);",tab_id:"selectmenu_tab_"+(r+1),data_index:r},on:{click:function(t){e.levelIndex=r}}},[e._v(e._s(t.title))])]):e._e()}))]),e._v(" "),i("div",{staticClass:"rg-results-container"},[i("ul",{staticClass:"rg-results"},[e._l(e.list,function(t,r){return i("li",{key:r,class:{"rg-item":!0,active:e.matchItem(t)},on:{click:function(i){e.itemSelect(t)}}},[e._v(e._s(t.value))])}),e._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:0===e.list.length,expression:"list.length === 0"}],staticClass:"rg-message-box"},[e._v("无匹配项目")])],2)])]):e._e()],1)},n=[],a={render:r,staticRenderFns:n};t.a=a},mcg1:function(e,t,i){"use strict";function r(e){i("BpPu")}var n=i("oCPT"),a=i("keop"),o=i("VU/8"),s=r,l=o(n.a,a.a,s,null,null);t.a=l.exports},mnVu:function(e,t,i){var r=i("kM2E"),n=i("52gC"),a=i("S82l"),o=i("hyta"),s="["+o+"]",l="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,i){var n={},s=a(function(){return!!o[e]()||l[e]()!=l}),c=n[e]=s?t(h):o[e];i&&(n[i]=c),r(r.P+r.F*s,"String",n)},h=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},oCPT:function(e,t,i){"use strict";var r=i("//Fk"),n=i.n(r),a=i("gBtx"),o=i.n(a),s=i("fZjL"),l=i.n(s),c=i("t5DY"),u=i("/OH/"),d=i("UZPH");t.a={name:"vregion",components:{"v-dropdown":u.a},props:{blank:{type:Boolean,default:!0},province:{type:Boolean,default:!0},city:{type:Boolean,default:!0},area:{type:Boolean,default:!0},town:{type:Boolean,default:!1},i18n:{type:String,default:"cn"},selected:Object,ui:{type:Boolean,default:!1},search:{type:Boolean,default:!0},text:{type:Boolean,default:!1},ifAera:{type:Boolean,default:!1}},data:function(){return{listProvince:[],listCity:[],listArea:[],listTown:[],nowProvince:"",nowCity:"",nowArea:"",nowTown:"",haveCity:!0,className:"",lang:{},init:this.selected,pauseWatch:!1,query:"",levels:[{index:0,title:"省/直辖市"},{index:1,title:"市"},{index:2,title:"区/县"},{index:3,title:"乡/镇/街道"}],levelIndex:-1,list:[],itemProvince:null,itemCity:null,itemArea:null,itemTown:null}},watch:{query:function(e){var t=this.getList(this.levelIndex),i=[];i=t.filter(function(t){return t.value.toLowerCase().includes(e.toLowerCase())}),0===i.length&&(i=t.filter(function(t){return t.key.includes(e)})),this.list=i},nowProvince:function(e){var t=this;this.pauseWatch||this.city&&this.fetchCity(e).then(function(i){if(i.code===t.nowProvince){var r=i.data;t.listArea.length&&t.listArea.splice(0,t.listArea.length),t.listCity=r,t.nowCity="",t.haveCity||(t.nowArea=""),t.itemProvince=t.listProvince.find(function(t){return t.key===e}),t.haveCity=!!t.listCity.length,t.$nextTick(function(){!t.haveCity&&t.area?t.changeCity():t.initSelected(2),t.ui&&(t.levelIndex=t.haveCity?1:2)}),t.changeValues()}})},nowCity:function(e){this.pauseWatch||(this.changeCity(),this.itemCity=this.listCity.find(function(t){return t.key===e}),this.ui&&(this.levelIndex=2),this.changeValues())},nowArea:function(e){if(!this.pauseWatch){var t=this;if(e&&t.town){var i=[];this.listTown=i}else this.listTown=[];this.town&&(this.nowTown=""),console.log("nowArea:",e,this.listArea),this.itemArea=this.listArea.find(function(t){return t.key===e}),this.initSelected(4),this.ui&&this.town&&(this.levelIndex=3),this.changeValues()}},nowTown:function(e){this.pauseWatch||(this.itemTown=this.listTown.find(function(t){return t.key===e}),this.changeValues())},selected:{handler:function(e){e&&l()(e).length&&(this.init=e,this.initSelected(1))},deep:!0},levelIndex:function(e){this.list=this.getList(e)}},methods:{changeCity:function(){var e=this;if(this.area||!this.haveCity&&this.province){if(this.haveCity&&!this.nowCity||!this.haveCity&&!this.nowProvince)console.log("2222222222:",this.haveCity,this.nowProvince,this.nowCity),this.listArea=[];else{var t=o()(this.haveCity?this.nowCity:this.nowProvince),i=this.haveCity;this.fetchCity(t).then(function(t){var r=t.data;if(i){if(e.nowCity!==t.code)return}else if(e.nowProvince!==t.code)return;e.listArea=r,console.log("333333333:",e.haveCity,e.nowProvince,e.nowCity,i,t.code,r),r.length&&(e.list=e.getList(2),e.initSelected(3))})}this.nowArea=""}else this.initSelected(3)},changeValues:function(){var e=this;this.$nextTick(function(){e.$emit("values",{province:e.itemProvince,city:e.itemCity,area:e.itemArea,town:e.itemTown})})},initSelected:function(e){var t=this,i=this.init,r=0;if(i&&l()(i).length){switch(e){case 1:t.province&&i.province&&(t.nowProvince=i.province);break;case 2:t.city&&i.city&&(t.nowCity=i.city);break;case 3:t.area&&i.area&&(t.nowArea=i.area);break;case 4:t.town&&i.town&&(t.nowTown=i.town)}t.province&&i.province&&r++,t.city&&(i.city||!i.city&&!t.haveCity&&t.area&&i.area)&&r++,t.area&&i.area&&r++,t.town&&i.town&&r++,e===r&&(this.init=null)}},getList:function(e){var t=[];switch(e){case 0:t=this.listProvince;break;case 1:t=this.listCity;break;case 2:t=this.listArea;break;case 3:t=this.listTown}return t},checkAvailable:function(e){var t=!1;switch(e){case 0:this.province&&(t=!0);break;case 1:this.city&&this.haveCity&&(t=!0);break;case 2:this.area&&(t=!0);break;case 3:this.town&&(t=!0)}return t},matchItem:function(e){return e.key===this.nowProvince||e.key===this.nowCity||e.key===this.nowArea||e.key===this.nowTown},itemSelect:function(e){switch(this.levelIndex){case 0:this.nowProvince=e.key,this.itemProvince=e;break;case 1:this.nowCity=e.key,this.itemCity=e;break;case 2:this.nowArea=e.key,this.itemArea=e;break;case 3:this.nowTown=e.key,this.itemTown=e}},showDropdown:function(e){var t=this;if(console.log(e),"boolean"==typeof e){var i=this;this.$refs.dropdown.$emit("show",e,this.$refs.caller);var r=!1,n=["北京市","天津市","重庆市","上海市","香港","澳门","台湾"];!1===e&&this.ifAera&&(n.forEach(function(e){0===t.itemProvince.name.indexOf(e)&&(r=!0)}),null==this.itemCity&&!1===r&&this.$emit("testCity")),e&&(this.query="",this.$nextTick(function(){return i.$refs.input.focus({preventScroll:!0})}))}},clear:function(){var e=this;this.pauseWatch=!0,this.nowProvince="",this.nowCity="",this.nowArea="",this.nowTown="",this.itemProvince=null,this.itemCity=null,this.itemArea=null,this.itemTown=null,this.listCity=[],this.listArea=[],this.listTown=[],this.levelIndex=0,this.$nextTick(function(){e.pauseWatch=!1,e.changeValues()})},fetchCity:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new n.a(function(i){return Object(c.a)(t).then(function(t){return t.data=e.formatCity(t.data),i(t),t}).catch(function(e){console.log("err:",e),i({code:t,data:[]})})})},formatCity:function(e){return e.map(function(e){return e.key=e.code,e.value=e.name,e})}},beforeMount:function(){this.lang=d.a[this.i18n]},mounted:function(){var e=this;this.fetchCity().then(function(t){var i=t.data.filter(function(e){return e});e.listProvince=e.ui?i.concat().sort(function(e,t){var i=e.value.length-t.value.length;return 0===i?Number(e.key)-Number(t.key):i}):i.concat(),e.className=e.$el.className,e.$el.className="v-region",e.selected&&e.selected.province&&(e.nowProvince=e.selected.province),e.ui&&(e.levelIndex=0)})}}},qZ1X:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"v-dropdown-container",style:[e.styleSheet]},[e._t("default")],2)},n=[],a={render:r,staticRenderFns:n};t.a=a},qrpI:function(e,t,i){i("8sHD"),e.exports=i("FeBl").Number.parseInt},t5DY:function(e,t,i){"use strict";function r(e){return e=e||"",f.b.get("/aflccommonservice/common/aflcCommonPCA/v1/findAflcCommonPCAByCode?code="+e).then(function(t){return t.code=e,t})}function n(){return v?new m.a(function(e){e(v)}):f.b.get("/anfacommonservice/common/oss/v1/policy").then(function(e){return v=e.data||"",setTimeout(function(){v=""},18e4),v})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f.b.get("/aflccommonservice/sysDict/getSysDictByCodeGet/"+e).then(function(e){return e.data||[]})}function o(e){return f.b.axios({url:"/"+p+"/sysDict/getSysDictByCodeGet/"+e,method:"get"})}function s(e){return f.b.axios({url:"/"+p+"/common/aflcMemberCenter/v1/getShipperInfoByMobile?mobile="+e,method:"get"})}function l(e){return f.b.axios({url:"/"+p+"/common/aflcMemberCenter/v1/getDriverInfoByMobile?mobile="+e,method:"get"})}function c(e){return f.b.axios({url:"/"+p+"/common/aflcMemberCenter/v1/getLogisticsCompanyInfoByMobile?mobile="+e,method:"get"})}function u(e){return f.b.axios({url:"/aflcorderservice/order/fclOrder/v1/getDetailsByOrderSerial/"+e,method:"get"})}function d(e,t){var i=new FormData;for(var r in t)i.append(r,t[r]);var n="";for(var a in t)n+="&"+a+"="+t[a];return f.b.request({url:"/aflccommonservice/common/aflcMemberCenter/v1/updatePassword?memberType="+e,method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n})}t.a=r,t.h=n,t.f=a,t.c=o,t.g=s,t.d=l,t.e=c,t.b=u,t.i=d;var h=i("//Fk"),m=i.n(h),f=i("Vo7i"),p="aflccommonservice",v=void 0},"xT+W":function(e,t){},xoQy:function(e,t,i){"use strict";t.a={name:"v-dropdown",props:{position:{type:String,default:"left"}},data:function(){return{show:!1,styleSheet:{top:"",left:""}}},watch:{},methods:{visible:function(e,t){if("boolean"==typeof e){this.show=e;var i=this;this.$nextTick(function(){i.show&&i.adjust(t)})}},adjust:function(e){var t=e.getBoundingClientRect(),i=0,r=0,n=this.$el.getBoundingClientRect(),a=window.scrollY,o=document.body.clientHeight;if(this.rightClick){var s=this.y;this.y+n.height>a+o&&(s=this.y-n.height),r=this.x,i=s}else switch(i=t.top+t.height+5+a,this.position){case"left":r=t.left;break;case"center":r=t.left+t.width/2-n.width/2;break;case"right":r=t.left+t.width-n.width}this.styleSheet.top=i+"px",this.styleSheet.left=r+"px"},whole:function(e){if(this.show){-1===e.path.findIndex(function(e){return e.className&&e.className.includes("v-dropdown-container")})&&(this.show=!1)}}},mounted:function(){this.$on("show",this.visible),document.addEventListener("mousedown",this.whole)},destroyed:function(){this.$off("show",this.visible),document.removeEventListener("mousedown",this.whole)}}},xzx5:function(e,t){}});