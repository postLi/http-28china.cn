$(function(){$(".trbox").css({ "height": $(window).height() - 70 });$(".return_top").click(function (){$("body,html").animate({scrollTop:"0px"});});});
/*网站导航*/
$(document).ready(function(){$('.sub_menu_x').hover(function(){$(this).children('ul').css('display','block')},function(){$(this).children('ul').css('display','none')});$("#nav_new_list").find('li').hover(function(){if($(this).attr('alt'))$(this).addClass($(this).attr('alt')+'on');else $(this).addClass('on')},function(){if($(this).attr('flg')!='sel'){if($(this).attr('alt')!='bz')$(this).removeClass('on');else $(this).removeClass('bz_on')}})});
/*弹窗滑动*/
function addEvent(obj,evType,fn){if(obj.addEventListener){obj.addEventListener(evType,fn,false);return true}else if(obj.attachEvent){var r=obj.attachEvent("on"+evType,fn);return r}else{return false}}function removeEvent(obj,evType,fn,useCapture){if(obj.removeEventListener){obj.removeEventListener(evType,fn,useCapture);return true}else if(obj.detachEvent){var r=obj.detachEvent("on"+evType,fn);return r}else{alert("Handler could not be removed")}}function getViewportHeight(){if(window.innerHeight!=window.undefined)return window.innerHeight;if(document.compatMode=='CSS1Compat')return document.documentElement.clientHeight;if(document.body)return document.body.clientHeight;return window.undefined}function getViewportWidth(){var offset=17;var width=null;if(window.innerWidth!=window.undefined)return window.innerWidth;if(document.compatMode=='CSS1Compat')return document.documentElement.clientWidth;if(document.body)return document.body.clientWidth}function getScrollTop(){if(self.pageYOffset){return self.pageYOffset}else if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop}else if(document.body){return document.body.scrollTop}}function getScrollLeft(){if(self.pageXOffset){return self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollLeft){return document.documentElement.scrollLeft}else if(document.body){return document.body.scrollLeft}}
/*通用弹窗*/
var gPopupMask=null;var gPopupContainer=null;var gPopFrame=null;var gReturnFunc;var gPopupIsShown=false;var gDefaultPage="../../loading.html";var gHideSelects=false;var gReturnVal=null;var gTabIndexes=new Array();var gTabbableTags=new Array("A","BUTTON","TEXTAREA","INPUT","IFRAME");if(!document.all){document.onkeypress=keyDownHandler}function initPopUp(){theBody=document.getElementsByTagName('BODY')[0];popmask=document.createElement('div');popmask.id='popupMask';popcont=document.createElement('div');popcont.id='popupContainer';popcont.innerHTML='<div id="popupInner"><div id="popupTitleBar"><div id="popupTitle"></div><div id="popupControls"><img src="../../images/close.gif" height="20" width="20" onclick="hidePopWin(false);" id="popCloseBox" /></div></div><iframe src="'+gDefaultPage+'" style="width:100%;height:100%;background-color:transparent;" scrolling="no" frameborder="0" allowtransparency="true" id="popupFrame" name="popupFrame" width="100%" height="100%"></iframe></div>';theBody.appendChild(popmask);theBody.appendChild(popcont);gPopupMask=document.getElementById("popupMask");gPopupContainer=document.getElementById("popupContainer");gPopFrame=document.getElementById("popupFrame");var brsVersion=parseInt(window.navigator.appVersion.charAt(0),10);if(brsVersion<=6&&window.navigator.userAgent.indexOf("MSIE")>-1){gHideSelects=true}var elms=document.getElementsByTagName('a');for(i=0;i<elms.length;i++){if(elms[i].className.indexOf("submodal")==0){elms[i].onclick=function(){var width=400;var height=200;params=this.className.split('-');if(params.length==3){width=parseInt(params[1]);height=parseInt(params[2])}showPopWin(this.href,width,height,null);return false}}}}addEvent(window,"load",initPopUp);function showPopWin(Title,url,width,height,returnFunc,showCloseBox){document.getElementById("popupTitle").innerHTML=Title;if(showCloseBox==null||showCloseBox==true){document.getElementById("popCloseBox").style.display="block"}else{document.getElementById("popCloseBox").style.display="none"}gPopupIsShown=true;disableTabIndexes();gPopupMask.style.display="block";gPopupContainer.style.display="block";centerPopWin(width,height);var titleBarHeight=parseInt(document.getElementById("popupTitleBar").offsetHeight,10);gPopupContainer.style.width=width+"px";gPopupContainer.style.height=(height+titleBarHeight)+"px";setMaskSize();gPopFrame.style.width=parseInt(document.getElementById("popupTitleBar").offsetWidth,10)+"px";gPopFrame.style.height=(height)+"px";gPopFrame.src=url;gReturnFunc=returnFunc;if(gHideSelects==true){hideSelectBoxes()}window.setTimeout("setPopTitle();",600)}var gi=0;function centerPopWin(width,height){if(gPopupIsShown==true){if(width==null||isNaN(width)){width=gPopupContainer.offsetWidth}if(height==null){height=gPopupContainer.offsetHeight}var theBody=document.getElementsByTagName("BODY")[0];var scTop=parseInt(getScrollTop(),10);var scLeft=parseInt(theBody.scrollLeft,10);setMaskSize();var titleBarHeight=parseInt(document.getElementById("popupTitleBar").offsetHeight,10);var fullHeight=getViewportHeight();var fullWidth=getViewportWidth();gPopupContainer.style.top=(scTop+((fullHeight-(height+titleBarHeight))/2))+"px";gPopupContainer.style.left=(scLeft+((fullWidth-width)/2))+"px"}}addEvent(window,"resize",centerPopWin);addEvent(window,"scroll",centerPopWin);window.onscroll=centerPopWin;function setMaskSize(){var theBody=document.getElementsByTagName("BODY")[0];var fullHeight=getViewportHeight();var fullWidth=getViewportWidth();if(fullHeight>theBody.scrollHeight){popHeight=fullHeight}else{popHeight=theBody.scrollHeight}if(fullWidth>theBody.scrollWidth){popWidth=fullWidth}else{popWidth=theBody.scrollWidth}gPopupMask.style.height=popHeight+"px";gPopupMask.style.width=popWidth+"px"}function hidePopWin(callReturnFunc){gPopupIsShown=false;var theBody=document.getElementsByTagName("BODY")[0];theBody.style.overflow="";restoreTabIndexes();if(gPopupMask==null){return}gPopupMask.style.display="none";gPopupContainer.style.display="none";if(callReturnFunc==true&&gReturnFunc!=null){gReturnVal=window.frames["popupFrame"].returnVal;window.setTimeout('gReturnFunc(gReturnVal);',1)}gPopFrame.src=gDefaultPage;if(gHideSelects==true){displaySelectBoxes()}}function setPopTitle(){return;if(window.frames["popupFrame"].document.title==null){window.setTimeout("setPopTitle();",10)}else{document.getElementById("popupTitle").innerHTML=window.frames["popupFrame"].document.title}}function keyDownHandler(e){if(gPopupIsShown&&e.keyCode==9)return false}function disableTabIndexes(){if(document.all){var i=0;for(var j=0;j<gTabbableTags.length;j++){var tagElements=document.getElementsByTagName(gTabbableTags[j]);for(var k=0;k<tagElements.length;k++){gTabIndexes[i]=tagElements[k].tabIndex;tagElements[k].tabIndex="-1";i++}}}}function restoreTabIndexes(){if(document.all){var i=0;for(var j=0;j<gTabbableTags.length;j++){var tagElements=document.getElementsByTagName(gTabbableTags[j]);for(var k=0;k<tagElements.length;k++){tagElements[k].tabIndex=gTabIndexes[i];tagElements[k].tabEnabled=true;i++}}}}function hideSelectBoxes(){var x=document.getElementsByTagName("SELECT");for(i=0;x&&i<x.length;i++){x[i].style.visibility="hidden"}}function displaySelectBoxes(){var x=document.getElementsByTagName("SELECT");for(i=0;x&&i<x.length;i++){x[i].style.visibility="visible"}}
/*图片延迟加载*/
(function($){$.fn.scrollLoading=function(options){var defaults={attr:"data-url",container:$(window),callback:$.noop};var params=$.extend({},defaults,options||{});params.cache=[];$(this).each(function(){var node=this.nodeName.toLowerCase(),url=$(this).attr(params["attr"]);var data={obj:$(this),tag:node,url:url};params.cache.push(data)});var callback=function(call){if($.isFunction(params.callback)){params.callback.call(call.get(0))}};var loading=function(){var contHeight=params.container.height();if($(window).get(0)===window){contop=$(window).scrollTop()}else{contop=params.container.offset().top}$.each(params.cache,function(i,data){var o=data.obj,tag=data.tag,url=data.url,post,posb;if(o){post=o.offset().top-contop,post+o.height();if((post>=0&&post<contHeight)||(posb>0&&posb<=contHeight)){if(url){if(tag==="img"){callback(o.attr("src",url))}else{o.load(url,{},function(){callback(o)})}}else{callback(o)}data.obj=null}}})};loading();params.container.bind("scroll",loading)}})(jQuery);
/*图片标注*/
(function($){$(document).on('click','a[data-reveal-id]',function(e){e.preventDefault();var modalLocation=$(this).attr('data-reveal-id');$('#'+modalLocation).reveal($(this).data())});$(document).ready(function(){$(".btn").hover(function(){$(this).stop().animate({width:'200px'},200).css({'z-index':'10'})},function(){$(this).stop().animate({width:'35px'},200).css({'z-index':'1'})})});$.fn.reveal=function(options){var defaults={animation:'fadeAndPop',animationspeed:300,closeonbackgroundclick:true,dismissmodalclass:'close-infobox'};var options=$.extend({},defaults,options);return this.each(function(){var modal=$(this),topMeasure=parseInt(modal.css('top')),topOffset=modal.height()+topMeasure,locked=false,modalBG=$('.infobox-bg');if(modalBG.length==0){modalBG=$('<div class="infobox-bg" />').insertAfter(modal);modalBG.css({position:"absolute",height:$(document).height(),opacity:"0.35"})}openModal();var closeButton=$('.'+options.dismissmodalclass).bind('click.modalEvent',closeModal);if(options.closeonbackgroundclick){modalBG.css({"cursor":"pointer"});modalBG.bind('click.modalEvent',closeModal)}function openModal(){modalBG.unbind('click.modalEvent');$('.'+options.dismissmodalclass).unbind('click.modalEvent');if(!locked){lockModal();if(options.animation=="fadeAndPop"){modal.css({'top':$(document).scrollTop()+topOffset,'opacity':0,'visibility':'visible'});modalBG.fadeIn(options.animationspeed/2);modal.delay(options.animationspeed/2).animate({"top":topMeasure,"opacity":1},options.animationspeed,unlockModal())}if(options.animation=="fade"){modal.css({'opacity':0,'visibility':'visible','top':topMeasure});modalBG.fadeIn(options.animationspeed/2);modal.delay(options.animationspeed/2).animate({"opacity":1},options.animationspeed,unlockModal())}if(options.animation=="none"){modal.css({'visibility':'visible','top':topMeasure});modalBG.css({"display":"block"});unlockModal()}}}function closeModal(){if(!locked){lockModal();if(options.animation=="fadeAndPop"){modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);modal.animate({"top":$(document).scrollTop()-topOffset,"opacity":0},options.animationspeed/2,function(){modal.css({'top':topMeasure,'opacity':1,'visibility':'hidden'});unlockModal()})}if(options.animation=="fade"){modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);modal.animate({"opacity":0},options.animationspeed,function(){modal.css({'opacity':1,'visibility':'hidden','top':topMeasure});unlockModal()})}if(options.animation=="none"){modal.css({'visibility':'hidden','top':topMeasure});modalBG.css({'display':'none'})}}}function unlockModal(){locked=false}function lockModal(){locked=true}})}})(jQuery);